<html>

<body>
    <h1>Real Time Database</h1>

    <u1 id="usersList"></u1>
    <hr>

    <div class="col-md-4">
        <form>
            <div class="form-group">
                <label for="nameInput">Name</label>
                <input type="text" class="form-control" id="nameInput" placeholder="Name">
            </div>
            <div class="form-group">
                <label for="ageInput">Age</label>
                <input type="number" class="form-control" id="ageInput" placeholder="Age">
            </div>
            <button class="btn btn-lg btn-block btn-primary" id="addButton">Add</button>
        </form>
    </div>

    <br><br>
    <a href="index.html">Back</li>
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
            const firebaseConfig = {
                apiKey: "AIzaSyA224zrzRZ7Iy7rrNRE9dWCUs-Kr23ktiE",
                authDomain: "disciplinareq.firebaseapp.com",
                databaseURL: "https://disciplinareq-default-rtdb.firebaseio.com",
                projectId: "disciplinareq",
                storageBucket: "disciplinareq.appspot.com",
                messagingSenderId: "292130692921",
                appId: "1:292130692921:web:29ab9b610e1c220d5652e8",
                measurementId: "G-FLC6D2WGBC"
            };
            const app = initializeApp(firebaseConfig);

            import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
            const db = getDatabase(app);
            var nameInput = document.getElementById('nameInput');
            var ageInput = document.getElementById('ageInput');
            var usersList = document.getElementById('usersList');
            document.getElementById('addButton').addEventListener(
                'click',
                function () {
                    return push(ref(db, 'users'), {
                        name: nameInput.value,
                        age: ageInput.value
                    });
                }
            )
            onValue(ref(db, 'users'), (snapshot) => {
                usersList.innerHTML = '';
                snapshot.forEach((item) => {
                    var li = document.createElement('li');
                    li.appendChild(document.createTextNode(item.val().name + ': ' + item.val().age));
                    usersList.appendChild(li);
                });
            });
        </script>
</body>

</html>